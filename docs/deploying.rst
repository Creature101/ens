***************
Deploying WNS
***************

If you'd like to deploy WNS on your own network, or deploy your own copy of WNS on a public or testnet network, this guide shows you how. If you want to use an existing WNS deployment, read :ref:`interacting` instead..

Deploy the registry
-------------------

First, you need to deploy WNS's central component, the registry. To do so, paste this code into an Wanchain console:

::

    var wnsContract = web3.eth.contract([{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"resolver","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"label","type":"bytes32"},{"name":"owner","type":"address"}],"name":"setSubnodeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"ttl","type":"uint64"}],"name":"setTTL","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"ttl","outputs":[{"name":"","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"resolver","type":"address"}],"name":"setResolver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"owner","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":true,"name":"label","type":"bytes32"},{"indexed":false,"name":"owner","type":"address"}],"name":"NewOwner","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"owner","type":"address"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"resolver","type":"address"}],"name":"NewResolver","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"ttl","type":"uint64"}],"name":"NewTTL","type":"event"}]);
    var wns = wnsContract.new({
        from: web3.eth.accounts[0],
        data: "0x6060604052341561000f57600080fd5b336000808060010260001916815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506108c0806100796000396000f300606060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630178b8bf1461008857806302571be3146100ef57806306ab59231461015657806314ab9038146101a957806316a25cbd146101e35780631896f70a146102325780635b0fc9c314610278575b600080fd5b341561009357600080fd5b6100ad6004808035600019169060200190919050506102be565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156100fa57600080fd5b610114600480803560001916906020019091905050610305565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561016157600080fd5b6101a76004808035600019169060200190919080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061034c565b005b34156101b457600080fd5b6101e160048080356000191690602001909190803567ffffffffffffffff169060200190919050506104c6565b005b34156101ee57600080fd5b6102086004808035600019169060200190919050506105d7565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b341561023d57600080fd5b61027660048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610612565b005b341561028357600080fd5b6102bc60048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610753565b005b6000806000836000191660001916815260200190815260200160002060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000806000836000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000833373ffffffffffffffffffffffffffffffffffffffff16600080836000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156103c657600080fd5b848460405180836000191660001916815260200182600019166000191681526020019250505060405180910390209150836000191685600019167fce0457fe73731f824cc272376169235128c118b49d344817417c6d108d155e8285604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a382600080846000191660001916815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050505050565b813373ffffffffffffffffffffffffffffffffffffffff16600080836000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561053e57600080fd5b82600019167f1d4f9bbfc9cab89d66e1a1562f2233ccbf1308cb4f63de2ead5787adddb8fa6883604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390a281600080856000191660001916815260200190815260200160002060010160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050565b6000806000836000191660001916815260200190815260200160002060010160149054906101000a900467ffffffffffffffff169050919050565b813373ffffffffffffffffffffffffffffffffffffffff16600080836000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561068a57600080fd5b82600019167f335721b01866dc23fbee8b6b2c7b1e14d6f05c28cd35a2c934239f94095602a083604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a281600080856000191660001916815260200190815260200160002060010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050565b813373ffffffffffffffffffffffffffffffffffffffff16600080836000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156107cb57600080fd5b82600019167fd4735d920b0f87494915f556dd9b54c8f309026070caea5c737245152564d26683604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a281600080856000191660001916815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050505600a165627a7a7230582060131dc17ae2eb41ac8ccf266a6b126549a8567d29357bed50e20d3981125f790029",
        gas: 4700000,
        gasPrice: 200000000000 
    }, function (e, contract){
        console.log(e, contract);
        if (typeof contract.address !== 'undefined') {
             console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
        }
    });


Once successfully mined, you will have a fresh WNS registry, whose root node is owned by the account that created the transaction (in this case, the first account on your node). This account has total control over the WNS registry - it can create and replace any node in the entire tree.

For instructions on how to interact with the registry, see :ref:`interacting`.

Deploying a registrar
---------------------

A registrar is a contract that has ownership over a node (name) in the WNS registry, and provides an interface for users to register subnodes (subdomains). You can deploy a registrar on any name; in this example we'll deploy a simple first-in-first-served registrar for the root node.

To deploy a first-in-first-served registrar on the root node of an WNS registry you control, execute this code in an Wanchain console:

::

    var registrarContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"wns","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"expiryTimes","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"subnode","type":"bytes32"},{"name":"owner","type":"address"}],"name":"register","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"rootNode","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"wnsAddr","type":"address"},{"name":"node","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]);
    var registrar = registrarContract.new(
        wns.address,
        0,
        0,
        {from: web3.eth.accounts[0],
        data: "0x6060604052341561000f57600080fd5b6040516060806200424d83398101604052808051906020019091908051906020019091908051906020019091905050826000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508160018160001916905550600081116100975742610099565b805b60048190555050505061419b80620000b26000396000f300606060405260043610610133576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630230a07c1461013857806313c89a8f1461015f57806315f733311461019a57806322ec1244146101f75780632525f5c11461026f578063267b6922146102b557806347872b42146103465780635ddae283146103835780635e431709146103aa57806361d585da1461043057806379ce9fac14610479578063910c9701146104bf5780639350333714610514578063983b94fb1461055c5780639c67f06f14610583578063ae1a0b0c146105ac578063ce92dced146105e1578063de10f04b146105fd578063e27fe50f14610657578063ea9e107a146106b1578063ede8acdb14610700578063faff50a814610727578063febefd6114610758575b600080fd5b341561014357600080fd5b61015d6004808035600019169060200190919050506107b4565b005b341561016a57600080fd5b610184600480803560001916906020019091905050610b5b565b6040518082815260200191505060405180910390f35b34156101a557600080fd5b6101f5600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610b87565b005b341561020257600080fd5b61025160048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190803560001916906020019091905050611075565b60405180826000191660001916815260200191505060405180910390f35b341561027a57600080fd5b6102b3600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035600019169060200190919050506110fa565b005b34156102c057600080fd5b6102da60048080356000191690602001909190505061146d565b604051808660058111156102ea57fe5b60ff1681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018381526020018281526020019550505050505060405180910390f35b341561035157600080fd5b610381600480803560001916906020019091908035906020019091908035600019169060200190919050506114e7565b005b341561038e57600080fd5b6103a8600480803560001916906020019091905050611de9565b005b34156103b557600080fd5b6103ee600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803560001916906020019091905050612254565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561043b57600080fd5b610455600480803560001916906020019091905050612296565b6040518082600581111561046557fe5b60ff16815260200191505060405180910390f35b341561048457600080fd5b6104bd60048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050612325565b005b34156104ca57600080fd5b6104d2612575565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561051f57600080fd5b61054260048080356000191690602001909190803590602001909190505061259a565b604051808215151515815260200191505060405180910390f35b341561056757600080fd5b6105816004808035600019169060200190919050506125af565b005b341561058e57600080fd5b610596612991565b6040518082815260200191505060405180910390f35b34156105b757600080fd5b6105bf612997565b604051808263ffffffff1663ffffffff16815260200191505060405180910390f35b6105fb60048080356000191690602001909190505061299e565b005b341561060857600080fd5b610655600480803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050612b99565b005b341561066257600080fd5b6106af600480803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050612c07565b005b34156106bc57600080fd5b6106fe60048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050612c47565b005b341561070b57600080fd5b610725600480803560001916906020019091905050612c4c565b005b341561073257600080fd5b61073a612e46565b60405180826000191660001916815260200191505060405180910390f35b6107b260048080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190803560001916906020019091905050612e4c565b005b60008082600260058111156107c557fe5b6107ce82612296565b60058111156107d957fe5b1480156108d5575060026000826000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561088b57600080fd5b6102c65a03f1151561089c57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156108e057600080fd5b60026000856000191660001916815260200190815260200160002092508260000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1691506301e1338083600101540142101580610a2557503073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36001546000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260001916600019168152602001915050602060405180830381600087803b15156109f157600080fd5b6102c65a03f11515610a0257600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff1614155b1515610a3057600080fd5b600083600201819055506000836003018190555060008360000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610a9184612e62565b8173ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e86040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b1515610b0157600080fd5b6102c65a03f11515610b1257600080fd5b50505083600019167f292b79b9246fa2c8e77d3fe195b251f9cb839d7d038e667c069ee7708c631e1684600201546040518082815260200191505060405180910390a250505050565b600060808083600190049060020a90046249d40063ffffffff16029060020a9004600454019050919050565b600080826040518082805190602001908083835b602083101515610bc05780518252602082019150602081019050602083039250610b9b565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206002806005811115610bfb57fe5b610c0483612296565b6005811115610c0f57fe5b141515610c1b57600080fd5b6006610c2686613210565b11151515610c3357600080fd5b846040518082805190602001908083835b602083101515610c695780518252602082019150602081019050602083039250610c44565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902093506002600085600019166000191681526020019081526020016000209250610cbe84612e62565b60008360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515610f5d57610d178360020154662386f26fc100006132cf565b83600201819055508260000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663b0c8097260028560020154811515610d6f57fe5b0460006040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018215151515815260200192505050600060405180830381600087803b1515610dce57600080fd5b6102c65a03f11515610ddf57600080fd5b5050508260000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166313af4035336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b1515610ea057600080fd5b6102c65a03f11515610eb157600080fd5b5050508260000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e86040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b1515610f4857600080fd5b6102c65a03f11515610f5957600080fd5b5050505b83600019167f1f9c649fe47e58bb60f4e52f0d90e4c47a526c9f90c5113df842c025970b66ad86856002015486600101546040518080602001848152602001838152602001828103825285818151815260200191508051906020019080838360005b83811015610fda578082015181840152602081019050610fbf565b50505050905090810190601f1680156110075780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a2600083600201819055506000836003018190555060008360000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050505050565b6000848484846040518085600019166000191681526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401838152602001826000191660001916815260200194505050505060405180910390209050949350505050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000836000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905060008173ffffffffffffffffffffffffffffffffffffffff16141580156112345750621275006206978063ffffffff168273ffffffffffffffffffffffffffffffffffffffff166305b344106000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561121357600080fd5b6102c65a03f1151561122457600080fd5b5050506040518051905001014210155b151561123f57600080fd5b8073ffffffffffffffffffffffffffffffffffffffff166313af4035336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b15156112d957600080fd5b6102c65a03f115156112ea57600080fd5b5050508073ffffffffffffffffffffffffffffffffffffffff1663bbe4277160056040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b151561135c57600080fd5b6102c65a03f1151561136d57600080fd5b5050506000600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000846000191660001916815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508273ffffffffffffffffffffffffffffffffffffffff1682600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e760006005604051808381526020018260ff1681526020019250505060405180910390a3505050565b600080600080600080600260008860001916600019168152602001908152602001600020905061149c87612296565b8160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826001015483600201548460030154839350955095509550955095505091939590929450565b6000806000806000806114fc89338a8a611075565b9550600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000876000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16945060008573ffffffffffffffffffffffffffffffffffffffff161415151561159f57600080fd5b6000600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000886000191660001916815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600260008a6000191660001916815260200190815260200160002093506116e4888673ffffffffffffffffffffffffffffffffffffffff16633fa4f2456000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156116c457600080fd5b6102c65a03f115156116d557600080fd5b505050604051805190506132eb565b92508473ffffffffffffffffffffffffffffffffffffffff1663b0c809728460016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018215151515815260200192505050600060405180830381600087803b151561176157600080fd5b6102c65a03f1151561177257600080fd5b50505061177e89612296565b91506002600581111561178d57fe5b82600581111561179957fe5b1415611886578473ffffffffffffffffffffffffffffffffffffffff1663bbe4277160056040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b151561180e57600080fd5b6102c65a03f1151561181f57600080fd5b5050503373ffffffffffffffffffffffffffffffffffffffff1689600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e7856001604051808381526020018260ff1681526020019250505060405180910390a3611dde565b6004600581111561189357fe5b82600581111561189f57fe5b1415156118ab57600080fd5b662386f26fc1000083108061195457506202a30063ffffffff168460010154038573ffffffffffffffffffffffffffffffffffffffff166305b344106000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561193757600080fd5b6102c65a03f1151561194857600080fd5b50505060405180519050115b15611a41578473ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e36040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b15156119c957600080fd5b6102c65a03f115156119da57600080fd5b5050503373ffffffffffffffffffffffffffffffffffffffff1689600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e7856000604051808381526020018260ff1681526020019250505060405180910390a3611ddd565b8360030154831115611bfa5760008460000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515611b3d578360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e36040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b1515611b2857600080fd5b6102c65a03f11515611b3957600080fd5b5050505b83600301548460020181905550828460030181905550848460000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055503373ffffffffffffffffffffffffffffffffffffffff1689600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e7856002604051808381526020018260ff1681526020019250505060405180910390a3611ddc565b8360020154831115611cf7578284600201819055508473ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e36040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b1515611c7f57600080fd5b6102c65a03f11515611c9057600080fd5b5050503373ffffffffffffffffffffffffffffffffffffffff1689600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e7856003604051808381526020018260ff1681526020019250505060405180910390a3611ddb565b8473ffffffffffffffffffffffffffffffffffffffff1663bbe427716103e36040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b1515611d6757600080fd5b6102c65a03f11515611d7857600080fd5b5050503373ffffffffffffffffffffffffffffffffffffffff1689600019167f7b6c4b278d165a6b33958f8ea5dfb00c8c9d4d0acf1985bef5d10786898bc3e7856004604051808381526020018260ff1681526020019250505060405180910390a35b5b5b5b505050505050505050565b6000808260026005811115611dfa57fe5b611e0382612296565b6005811115611e0e57fe5b148015611f0a575060026000826000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1515611ec057600080fd5b6102c65a03f11515611ed157600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515611f1557600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36001546000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260001916600019168152602001915050602060405180830381600087803b1515611fb757600080fd5b6102c65a03f11515611fc857600080fd5b5050506040518051905092503073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561200f57600080fd5b60026000856000191660001916815260200190815260200160002091508160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663faab9d39846040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b15156120ea57600080fd5b6102c65a03f115156120fb57600080fd5b5050508273ffffffffffffffffffffffffffffffffffffffff1663ea9e107a858460000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1685600101546040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018084600019166000191681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b15156121d857600080fd5b6102c65a03f115156121e957600080fd5b50505060008260000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060008260010181905550600082600201819055506000826003018190555050505050565b60036020528160005260406000206020528060005260406000206000915091509054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060026000846000191660001916815260200190815260200160002090506122c0834261259a565b15156122cf576005915061231f565b8060010154421015612304576202a30063ffffffff168160010154034210156122fb576001915061231f565b6004915061231f565b60008160030154141561231a576000915061231f565b600291505b50919050565b6000826002600581111561233557fe5b61233e82612296565b600581111561234957fe5b148015612445575060026000826000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156123fb57600080fd5b6102c65a03f1151561240c57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b151561245057600080fd5b60008373ffffffffffffffffffffffffffffffffffffffff161415151561247657600080fd5b60026000856000191660001916815260200190815260200160002091508160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166313af4035846040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b151561255157600080fd5b6102c65a03f1151561256257600080fd5b50505061256f8484613307565b50505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60006125a583610b5b565b8211905092915050565b600081600260058111156125bf57fe5b6125c882612296565b60058111156125d357fe5b1480156126cf575060026000826000191660001916815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561268557600080fd5b6102c65a03f1151561269657600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156126da57600080fd5b600260008460001916600019168152602001908152602001600020915061270c8260020154662386f26fc100006132cf565b82600201819055508160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663b0c80972836002015460016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018215151515815260200192505050600060405180830381600087803b15156127b757600080fd5b6102c65a03f115156127c857600080fd5b50505061287f838360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561285f57600080fd5b6102c65a03f1151561287057600080fd5b50505060405180519050613307565b8160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638da5cb5b6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561290f57600080fd5b6102c65a03f1151561292057600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff1683600019167f0f0c27adfd84b60b6f456b0e87cdccb1e5fb9603991588d87fa99f5b6b61e67084600201548560010154604051808381526020018281526020019250505060405180910390a3505050565b60045481565b6249d40081565b600080600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000846000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515612a3c57600080fd5b662386f26fc100003410151515612a5257600080fd5b3433612a5c6137eb565b808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019150506040518091039082f0801515612aa757600080fd5b9050905080600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000846000191660001916815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055503373ffffffffffffffffffffffffffffffffffffffff1682600019167fb556ff269c1b6714f432c36431e2041d28436a73b6c3f19c021827bbdc6bfc29346040518082815260200191505060405180910390a35050565b6000815114151515612baa57600080fd5b60026005811115612bb757fe5b612bdb826001845103815181101515612bcc57fe5b90602001906020020151612296565b6005811115612be657fe5b14151515612bf357600080fd5b612c046001825103826001546134ed565b50565b60008090505b8151811015612c4357612c368282815181101515612c2757fe5b90602001906020020151612c4c565b8080600101915050612c0d565b5050565b505050565b6000806004544210158015612c695750630784ce00600454014211155b8015612d5c57503073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36001546000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260001916600019168152602001915050602060405180830381600087803b1515612d2957600080fd5b6102c65a03f11515612d3a57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff16145b1515612d6757600080fd5b612d7083612296565b915060016005811115612d7f57fe5b826005811115612d8b57fe5b1415612d9657612e41565b60006005811115612da357fe5b826005811115612daf57fe5b141515612dbb57600080fd5b60026000846000191660001916815260200190815260200160002090506206978063ffffffff1642018160010181905550600081600201819055506000816003018190555082600019167f87e97e825a1d1fa0c54e1d36c7506c1dea8b1efd451fe68b000cf96f7cf4000382600101546040518082815260200191505060405180910390a25b505050565b60015481565b612e5582612c07565b612e5e8161299e565b5050565b60003073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36001546000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260001916600019168152602001915050602060405180830381600087803b1515612f1d57600080fd5b6102c65a03f11515612f2e57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff16141561320c576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360015484306040518463ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180846000191660001916815260200183600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050600060405180830381600087803b151561303157600080fd5b6102c65a03f1151561304257600080fd5b50505060015482604051808360001916600019168152602001826000191660001916815260200192505050604051809103902090506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631896f70a8260006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b151561312d57600080fd5b6102c65a03f1151561313e57600080fd5b5050506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635b0fc9c38260006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15156131f757600080fd5b6102c65a03f1151561320857600080fd5b5050505b5050565b6000806000806000600186019350838651019250600091505b828410156132c35760ff845116905060808160ff16101561324f576001840193506132b6565b60e08160ff161015613266576002840193506132b5565b60f08160ff16101561327d576003840193506132b4565b60f88160ff161015613294576004840193506132b3565b60fc8160ff1610156132ab576005840193506132b2565b6006840193505b5b5b5b5b8180600101925050613229565b81945050505050919050565b6000818311156132e1578290506132e5565b8190505b92915050565b6000818310156132fd57829050613301565b8190505b92915050565b3073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36001546000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260001916600019168152602001915050602060405180830381600087803b15156133c057600080fd5b6102c65a03f115156133d157600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff1614156134e9576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360015484846040518463ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180846000191660001916815260200183600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050600060405180830381600087803b15156134d457600080fd5b6102c65a03f115156134e557600080fd5b5050505b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592382848681518110151561353957fe5b90602001906020020151306040518463ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180846000191660001916815260200183600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050600060405180830381600087803b15156135df57600080fd5b6102c65a03f115156135f057600080fd5b50505080828481518110151561360257fe5b90602001906020020151604051808360001916600019168152602001826000191660001916815260200192505050604051809103902090506000831115613652576136516001840383836134ed565b5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631896f70a8260006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b151561370857600080fd5b6102c65a03f1151561371957600080fd5b5050506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635b0fc9c38260006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15156137d257600080fd5b6102c65a03f115156137e357600080fd5b505050505050565b604051610974806137fc83390190560060606040526040516020806109748339810160405280805190602001909190505080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550426003819055506001600560006101000a81548160ff021916908315150217905550346004819055505061089a806100da6000396000f3006060604052600436106100a4576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305b34410146100a95780630b5ab3d5146100d257806313af4035146100e75780632b20e397146101205780633fa4f24514610175578063674f220f1461019e5780638da5cb5b146101f3578063b0c8097214610248578063bbe4277114610276578063faab9d3914610299575b600080fd5b34156100b457600080fd5b6100bc6102d2565b6040518082815260200191505060405180910390f35b34156100dd57600080fd5b6100e56102d8565b005b34156100f257600080fd5b61011e600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610384565b005b341561012b57600080fd5b61013361050f565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561018057600080fd5b610188610534565b6040518082815260200191505060405180910390f35b34156101a957600080fd5b6101b161053a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101fe57600080fd5b610206610560565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561025357600080fd5b61027460048080359060200190919080351515906020019091905050610586565b005b341561028157600080fd5b610297600480803590602001909190505061069c565b005b34156102a457600080fd5b6102d0600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506107d0565b005b60035481565b600560009054906101000a900460ff161515156102f457600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f19350505050156103825761dead73ffffffffffffffffffffffffffffffffffffffff16ff5b565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156103df57600080fd5b60008173ffffffffffffffffffffffffffffffffffffffff161415151561040557600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fa2ea9883a321a3e97b8266c2b078bfeec6d50c711ed71f874a90d500ae2eaf3681604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a150565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60045481565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156105e157600080fd5b600560009054906101000a900460ff1615156105fc57600080fd5b816004541015151561060d57600080fd5b81600481905550600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc833073ffffffffffffffffffffffffffffffffffffffff1631039081150290604051600060405180830381858888f193505050508061068d575080155b151561069857600080fd5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156106f757600080fd5b600560009054906101000a900460ff16151561071257600080fd5b6000600560006101000a81548160ff02191690831515021790555061dead73ffffffffffffffffffffffffffffffffffffffff166108fc6103e83073ffffffffffffffffffffffffffffffffffffffff1631846103e8030281151561077357fe5b049081150290604051600060405180830381858888f19350505050151561079957600080fd5b7fbb2ce2f51803bba16bc85282b47deeea9a5c6223eabea1077be696b3f265cf1360405160405180910390a16107cd6102d8565b50565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561082b57600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505600a165627a7a72305820d56ed8aa13942d1a9355a9ad40517dcb60ea7882addbce65c01680eeaa92d54c0029a165627a7a7230582010542605e430552696b9f699417db7153e013a9414cbbde727aca2164c6ad00b0029",
        gas: 4700000,
        gasPrice: 200000000000 
    }, function (e, contract){
        console.log(e, contract);
        if (typeof contract.address !== 'undefined') {
             console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
        }
    });

Once that transaction is mined, you can transfer ownership of the root node to the newly created registrar:

::

    wns.setOwner(0, registrar.address, {from: web3.eth.accounts[0]});

Users can now register names with the registrar;
